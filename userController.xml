<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ora="http://www.oracle.com/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.17.xsd"
>


    <!-- SERT property file with parameters -->
    <property  file="sert.properties" contextFilter="standalone" />


    <preConditions  onFail="HALT">
            <sqlCheck  expectedResult="0">select count(workspace) from apex_applications where upper(alias) = 'SERT' and upper(workspace) != upper('${sert_apex_workspace}')</sqlCheck>
    </preConditions>

    <!-- Before we start, create the sert schema. We need to do this as a first
         action so that we can alter our session before kicking off the main
         sert installation process -->
    <include
        relativeToChangelogFile="true"
        file="product/sert/db/schemas/create_users.sql"
        contextFilter="sdk,standalone"
    />
</databaseChangeLog>